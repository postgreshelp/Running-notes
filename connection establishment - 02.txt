ps -ef | grep postgres

/usr/pgsql-17/bin/postgres -D /u01/pgsql/data		#postmaster

	- connection establishment
	- take care of other background processes
	- instance recovery (recovery processes)

/u01/pgsql/data/postgresql.conf
--------------------------------
log_connections = on
log_disconnections = on
log_duration = on

kill -9 is crime

FATAL:  password authentication failed for user "postgres"

LOG:  background writer process (PID 3150) was terminated by signal 9: Killed
LOG:  terminating any other active server processes


select pg_cancel_backend('4716');
ERROR:  canceling statement due to user request

postgres=# select pg_terminate_backend('4716');
FATAL:  terminating connection due to administrator command

postgres=*# commit;
WARNING:  terminating connection because of crash of another server process
DETAIL:  The postmaster has commanded this server process to roll back the current transaction and exit, because another server process exited abnormally and possibly corrupted shared memory.
HINT:  In a moment you should be able to reconnect to the database and repeat your command.

idle_session_timeout = 10s
FATAL:  terminating connection due to idle-session timeout

idle_in_transaction_session_timeout = 10s
FATAL:  terminating connection due to idle-in-transaction timeout

Parameters that control session timeouts:

#statement_timeout = 0                         
#transaction_timeout = 0                       
#idle_in_transaction_session_timeout = 0       
idle_session_timeout = 10s     

postgres=# select pid, query, state from pg_stat_activity;
 pid  |                      query                      | state
------+-------------------------------------------------+--------
 4707 | select pid, query, state from pg_stat_activity; | active
 4716 | select *, pg_sleep(60) from emp;                | active

postgres=# select pg_cancel_backend('4716');
 pg_cancel_backend
-------------------
 t
(1 row)

ERROR:  canceling statement due to user request



postgres=# select pg_terminate_backend('4716');
 pg_terminate_backend
----------------------
 t
(1 row)

postgres=# select *, pg_sleep(60) from emp;
FATAL:  terminating connection due to administrator command
server closed the connection unexpectedly
        This probably means the server terminated abnormally
        before or while processing the request.
The connection to the server was lost. Attempting reset: Succeeded.
postgres=#


























postgres: logger									#background processes
postgres: checkpointer                              #background processes
postgres: background writer                         #background processes
postgres: walwriter                                 #background processes
postgres: autovacuum launcher                       #background processes
postgres: logical replication launcher              #background processes
postgres: postgres postgres [local] idle			#user backend process


postgres    3147       1  0 19:50 ?        00:00:00 /usr/pgsql-17/bin/postgres -D /u01/pgsql/data
postgres    3148    3147  0 19:50 ?        00:00:00 postgres: logger
postgres    3149    3147  0 19:50 ?        00:00:00 postgres: checkpointer
postgres    3150    3147  0 19:50 ?        00:00:00 postgres: background writer
postgres    3152    3147  0 19:50 ?        00:00:00 postgres: walwriter
postgres    3153    3147  0 19:50 ?        00:00:00 postgres: autovacuum launcher
postgres    3154    3147  0 19:50 ?        00:00:00 postgres: logical replication launcher
postgres    3233    3046  0 19:52 pts/1    00:00:00 psql -U postgres -d postgres
postgres    3236    3147  0 19:52 ?        00:00:00 postgres: postgres postgres [local] idle

kill -9 3150

postgres    3147       1  0 19:50 ?        00:00:00 /usr/pgsql-17/bin/postgres -D /u01/pgsql/data
postgres    4417    3147  0 20:01 ?        00:00:00 postgres: checkpointer
postgres    4418    3147  0 20:01 ?        00:00:00 postgres: background writer
postgres    4419    3147  0 20:01 ?        00:00:00 postgres: walwriter
postgres    4420    3147  0 20:01 ?        00:00:00 postgres: autovacuum launcher
postgres    4421    3147  0 20:01 ?        00:00:00 postgres: logical replication launcher
postgres    4425    2950  0 20:02 pts/0    00:00:00 ps -ef
postgres    4426    2950  0 20:02 pts/0    00:00:00 grep --color=auto postgres
